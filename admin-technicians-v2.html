<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>จัดการช่าง - CWF</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body.cwf-lux{background:linear-gradient(180deg,#0b1b3a 0%, #0b4bb3 28%, #f5f7ff 28%, #ffffff 100%)!important}
    body.cwf-lux h2{color:#fff;text-shadow:0 2px 10px rgba(0,0,0,.25)}
    .app{max-width:980px;margin:0 auto;padding:14px 14px 140px}
    .card{background:#fff;border-radius:20px;padding:14px;border:1px solid rgba(11,75,179,0.18);box-shadow:0 10px 28px rgba(2,6,23,0.10)}
    .tabs{display:flex;gap:8px;flex-wrap:wrap;margin:10px 0}
    .tab{border-radius:999px;border:1px solid rgba(15,23,42,0.12);padding:10px 12px;font-weight:900;cursor:pointer;background:#fff;color:#0b1b3a}
    .tab.active{background:#0b4bb3;color:#fff;border-color:#0b4bb3}
    .btn{border-radius:14px;border:1px solid rgba(15,23,42,0.12);padding:10px 12px;font-weight:900;cursor:pointer}
    .btn.yellow{background:#ffcc00;color:#0b1b3a;border-color:#ffcc00}
    .btn.blue{background:#0b4bb3;color:#fff;border-color:#0b4bb3}
    .btn.gray{background:#fff;color:#0b1b3a}
    input, select{width:100%;padding:12px;border-radius:14px;border:1px solid rgba(11,75,179,0.18);font-weight:900}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    @media (max-width:720px){.grid2{grid-template-columns:1fr}}
    .list{display:flex;flex-direction:column;gap:8px;margin-top:10px}
    .item{border:1px solid rgba(15,23,42,0.10);border-radius:16px;padding:10px 12px;background:#fff;display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
    .item b{color:#0b1b3a}
    .muted{color:rgba(15,23,42,0.65);font-weight:800;font-size:13px}
    .pill{display:inline-flex;gap:6px;align-items:center;border-radius:999px;padding:5px 10px;font-weight:900;font-size:12px;background:#f1f5f9;color:#0b1b3a}
  </style>
</head>
<body class="cwf-lux">
  <div class="app">
    <h2 style="margin:0 0 10px 0">จัดการช่าง</h2>

    <div class="tabs">
      <button class="tab active" data-tab="list">รายชื่อช่าง</button>
      <button class="tab" data-tab="create">สร้าง ID ช่าง</button>
      <button class="tab" data-tab="approvals">คำขออนุมัติ</button>
    </div>

    <div class="card" id="tabList">
      <div class="grid2">
        <div>
          <div class="muted">ค้นหา</div>
          <input id="q" placeholder="ชื่อ/username/เบอร์">
        </div>
        <div style="display:flex;gap:8px;align-items:flex-end">
          <button class="btn blue" id="btnReload">โหลดรายชื่อ</button>
        </div>
      </div>
      <div class="list" id="techList"></div>
    </div>

    <div class="card" id="tabCreate" style="display:none">
      <div class="muted" style="margin-bottom:8px">สร้างบัญชีช่าง (ใช้จริงในระบบ)</div>
      <div class="grid2">
        <div>
          <div class="muted">Username (รหัสช่าง)</div>
          <input id="newUsername" placeholder="เช่น A2MKUNG">
        </div>
        <div>
          <div class="muted">Password</div>
          <input id="newPassword" placeholder="ตั้งรหัสผ่าน" type="password">
        </div>
      </div>
      <div class="grid2" style="margin-top:10px">
        <div>
          <div class="muted">ชื่อจริง</div>
          <input id="newFullName" placeholder="ชื่อช่าง">
        </div>
        <div>
          <div class="muted">เบอร์</div>
          <input id="newPhone" placeholder="เบอร์โทร">
        </div>
      </div>
      <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
        <button class="btn yellow" id="btnCreate">สร้าง ID</button>
      </div>
      <div class="muted" style="margin-top:10px" id="createStatus">—</div>
    </div>

    <div class="card" id="tabApprovals" style="display:none">
      <div class="muted">คำขออนุมัติราคา (จากช่าง)</div>
      <div class="list" id="priceReqList"></div>
      <div style="height:12px"></div>
      <div class="muted">คำขอแก้ไขโปรไฟล์ (จากช่าง)</div>
      <div class="list" id="profileReqList"></div>
    </div>

  </div>

  <script src="admin-v2-common.js"></script>
  <script src="admin-technicians-v2.js"></script>
</body>
</html>
