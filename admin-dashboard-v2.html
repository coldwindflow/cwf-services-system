<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Dashboard Admin - CWF</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body.cwf-lux{background:linear-gradient(180deg,#0b1b3a 0%, #0b4bb3 28%, #f5f7ff 28%, #ffffff 100%)!important}
    body.cwf-lux h2{color:#fff;text-shadow:0 2px 10px rgba(0,0,0,.25)}
    body.cwf-lux .card{border:1px solid rgba(11,75,179,0.18);box-shadow:0 10px 28px rgba(2,6,23,0.10)}
    .app{max-width:980px;margin:0 auto;padding:14px 14px 140px}
    .top{display:flex;align-items:flex-end;justify-content:space-between;gap:10px}
    .top .sub{color:rgba(255,255,255,0.82);font-weight:800}
    .me{display:flex;align-items:center;gap:10px;margin-top:6px}
    .avatar{width:44px;height:44px;border-radius:16px;object-fit:cover;border:1px solid rgba(255,255,255,0.22);
      box-shadow:0 10px 26px rgba(0,0,0,0.18);background:rgba(255,255,255,0.12)}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-top:12px}
    @media (max-width:920px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:420px){.grid{grid-template-columns:1fr}}
    .kpi{padding:12px 12px;border-radius:18px;background:#fff}
    .kpi .label{color:rgba(15,23,42,.62);font-weight:900;font-size:12px}
    .kpi .val{margin-top:6px;font-size:20px;font-weight:1000;color:#0b1b3a}
    .kpi .hint{margin-top:6px;color:rgba(15,23,42,.55);font-weight:800;font-size:12px}
    .row2{display:grid;grid-template-columns:1.2fr 0.8fr;gap:10px;margin-top:12px}
    @media (max-width:920px){.row2{grid-template-columns:1fr}}
    .row3{display:grid;grid-template-columns:0.9fr 1.1fr;gap:10px;margin-top:12px}
    @media (max-width:920px){.row3{grid-template-columns:1fr}}
    .card{background:#fff;border-radius:20px;padding:12px}
    .card h3{margin:0 0 8px 0;color:#0b1b3a;font-size:15px}
    .muted{color:rgba(15,23,42,0.65);font-weight:700;font-size:13px}
    .filters{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-top:12px}
    .filters input[type="date"]{padding:10px;border-radius:14px;border:1px solid rgba(11,75,179,0.18);font-weight:900}
    .iconbtn{width:44px;height:44px;display:inline-flex;align-items:center;justify-content:center;border-radius:16px;
      border:1px solid rgba(15,23,42,0.12);background:#fff;font-weight:1000;cursor:pointer}
    .iconbtn.yellow{background:#ffcc00;color:#0b1b3a;border-color:#ffcc00}
    .iconbtn.blue{background:#0b4bb3;color:#fff;border-color:#0b4bb3}
    .iconbtn.gray{background:#fff;color:#0b1b3a}
    .filterbox{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    .filterlabel{display:flex;align-items:center;gap:8px}
    .btn{border-radius:14px;border:1px solid rgba(15,23,42,0.12);padding:10px 12px;font-weight:900;cursor:pointer}
    .btn.yellow{background:#ffcc00;color:#0b1b3a;border-color:#ffcc00}
    .btn.blue{background:#0b4bb3;color:#fff;border-color:#0b4bb3}
    .btn.gray{background:#fff;color:#0b1b3a}
    .list{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .item{border:1px solid rgba(15,23,42,0.10);border-radius:16px;padding:10px 12px;background:#fff;display:flex;justify-content:space-between;gap:10px;align-items:flex-start}
    .item b{color:#0b1b3a}
    .pill{display:inline-flex;gap:6px;align-items:center;border-radius:999px;padding:5px 10px;font-weight:900;font-size:12px}
    .pill.yellow{background:#ffcc00;color:#0b1b3a}
    .pill.blue{background:#0b4bb3;color:#fff}
    .pill.gray{background:#f1f5f9;color:#0b1b3a}
    canvas{max-width:100%}
    .legend{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .leg{display:flex;align-items:center;gap:8px;border:1px solid rgba(15,23,42,0.10);border-radius:999px;padding:7px 10px;font-weight:900;background:#fff}
    .dot{width:10px;height:10px;border-radius:999px;display:inline-block}
    .chartTitle{display:flex;align-items:center;justify-content:space-between;gap:10px}
  </style>
</head>
<body class="cwf-lux">
  <div class="app">
    <div class="top">
      <div>
        <h2 style="margin:0">Dashboard</h2>
        <div class="me">
          <img id="meAvatar" class="avatar" alt="Admin" />
          <div>
            <div class="sub" id="whoBox">‚Äî</div>
            <div class="sub" id="roleBox" style="font-weight:900;color:rgba(255,255,255,0.72)">‚Äî</div>
          </div>
        </div>
      </div>
      <div style="text-align:right">
        <div class="sub">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
        <div class="sub" id="updatedAt">‚Äî</div>
      </div>
    </div>

    <div class="filters">
      <div class="filterbox">
        <button class="iconbtn yellow" id="quickToday" title="‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ" aria-label="‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ">üìÖ</button>
        <button class="iconbtn gray" id="quick7" title="7 ‡∏ß‡∏±‡∏ô" aria-label="7 ‡∏ß‡∏±‡∏ô">‚è±Ô∏è</button>
        <button class="iconbtn gray" id="quick30" title="30 ‡∏ß‡∏±‡∏ô" aria-label="30 ‡∏ß‡∏±‡∏ô">üóìÔ∏è</button>
      </div>
      <div class="filterbox">
        <div class="filterlabel">
          <span class="muted" style="font-weight:900">‡∏ä‡πà‡∏ß‡∏á</span>
          <span class="muted">üóìÔ∏è</span>
        </div>
        <input type="date" id="fromDate" title="‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà">
        <span class="muted">‚Üí</span>
        <input type="date" id="toDate" title="‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà">
        <button class="iconbtn blue" id="btnApply" title="‡πÇ‡∏´‡∏•‡∏î" aria-label="‡πÇ‡∏´‡∏•‡∏î">‚ü≥</button>
      </div>
    </div>

    <div class="grid">
      <div class="kpi card">
        <div class="label">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß (‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)</div>
        <div class="val" id="meRevenue">‚Äî</div>
        <div class="hint" id="meRevenueHint">‚Äî</div>
      </div>
      <div class="kpi card">
        <div class="label">‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</div>
        <div class="val" id="meCommission">‚Äî</div>
        <div class="hint" id="meCommissionHint">‚Äî</div>
      </div>
      <div class="kpi card">
        <div class="label">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)</div>
        <div class="val" id="coRevenue">‚Äî</div>
        <div class="hint" id="coRevenueHint">‚Äî</div>
      </div>
      <div class="kpi card">
        <div class="label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏≤‡∏ô (‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô/‡∏õ‡∏µ)</div>
        <div class="val" id="counts">‚Äî</div>
        <div class="hint">‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡πÄ‡∏ß‡∏•‡∏≤ Asia/Bangkok</div>
      </div>
    </div>

    <div class="row3">
      <div class="card">
        <div class="chartTitle">
          <h3 style="margin:0">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô (‡πÇ‡∏î‡∏ô‡∏±‡∏ó)</h3>
          <div class="muted" id="donutHint">‚Äî</div>
        </div>
        <canvas id="donut" height="170"></canvas>
        <div class="legend" id="donutLegend"></div>
      </div>
      <div class="card">
        <div class="chartTitle">
          <h3 style="margin:0">‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô (‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô)</h3>
          <div class="muted" id="candleHint">‚Äî</div>
        </div>
        <canvas id="candles" height="190"></canvas>
        <div class="muted" style="margin-top:8px">* ‡πÉ‡∏ä‡πâ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏á‡∏≤‡∏ô (job_price) ‡∏ó‡∏≥ OHLC ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</div>
      </div>
    </div>

    <div class="row2">
      <div class="card">
        <h3>‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ (‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö)</h3>
        <div class="muted" id="pendingHint">‚Äî</div>
        <div class="list" id="pendingList"></div>
      </div>
      <div class="card">
        <h3>‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î + ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥</h3>
        <div class="muted" id="activeHint">‚Äî</div>
        <div class="list" id="activeList"></div>
      </div>
    </div>

    <div class="card" style="margin-top:12px">
      <h3>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á)</h3>
      <div class="filters" style="margin-top:0">
        <button class="btn yellow" data-group="day">‡∏ß‡∏±‡∏ô</button>
        <button class="btn gray" data-group="week">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</button>
        <button class="btn gray" data-group="month">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
        <button class="btn gray" data-group="year">‡∏õ‡∏µ</button>
      </div>
      <div class="muted" id="seriesHint" style="margin-top:8px">‚Äî</div>
      <canvas id="chart" height="160"></canvas>
    </div>

  </div>

  <script src="admin-v2-common.js"></script>
  <script src="admin-dashboard-v2.js"></script>
</body>
</html>
