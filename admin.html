<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin - CWF</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .menu-grid{display:grid;grid-template-columns:1fr;gap:10px;margin-top:12px;}
    .menu-grid a{display:block;text-decoration:none;}
    .menu-card{background:#fff;border:1px solid rgba(15,23,42,0.10);border-radius:16px;padding:12px;box-shadow:var(--shadow);}
    .menu-card b{display:block;font-size:16px;margin-bottom:4px;}
    .menu-card .muted{font-size:13px;}
    .top-row{display:flex;gap:10px;align-items:center;justify-content:space-between;}
    .btn-small{min-height:42px;padding:10px 12px;}
    /* bottom nav (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ù‡∏±‡πà‡∏á‡∏ä‡πà‡∏≤‡∏á) */
    .bottom-nav{position:fixed;left:0;right:0;bottom:0;background:#0f172a;display:flex;gap:6px;padding:8px;padding-bottom:calc(8px + env(safe-area-inset-bottom));z-index:999;border-top:1px solid rgba(255,255,255,0.08)}
    .nav-btn{flex:1;min-height:44px;border:1px solid rgba(255,255,255,0.18);background:transparent;color:#fff;border-radius:12px;font-weight:700;font-size:13px}
    .nav-btn.active{background:#22c55e;color:#052e16;border-color:transparent}
    .app{padding-bottom:86px}
  </style>
</head>
<body class="theme-2">
  <div class="app">
    <div class="top-row">
      <h2 style="margin:0">üë®‚Äçüíº Admin - CWF</h2>
      <button class="danger btn-small" type="button" id="btnLogout">‡∏≠‡∏≠‡∏Å</button>
    </div>

    <div class="muted" style="margin-top:6px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>

    <div class="menu-grid">
      <a href="/admin-review-v2.html" class="menu-card">
        <b>üì• ‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ (‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö)</b>
        <div class="muted">‡∏ï‡∏£‡∏ß‡∏à/‡πÅ‡∏Å‡πâ/‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≤‡∏á+‡∏ó‡∏µ‡∏°/‡∏¢‡∏¥‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏≤‡∏á</div>
      </a>
      <a href="/admin-add-v2.html" class="menu-card">
        <b>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô (Flow ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤)</b>
        <div class="muted">‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ (extras) + ‡πÇ‡∏õ‡∏£‡∏Ø + override ‡∏£‡∏≤‡∏Ñ‡∏≤/‡πÄ‡∏ß‡∏•‡∏≤</div>
      </a>
      <a href="/admin-queue-v2.html" class="menu-card">
        <b>üóìÔ∏è ‡πÄ‡∏ä‡πá‡∏Ñ‡∏Ñ‡∏¥‡∏ß‡∏ä‡πà‡∏≤‡∏á (‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô)</b>
        <div class="muted">‡∏î‡∏π‡∏á‡∏≤‡∏ô‡πÅ‡∏¢‡∏Å‡∏£‡∏≤‡∏¢‡∏ä‡πà‡∏≤‡∏á ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤ (‡∏£‡∏ß‡∏° travel buffer)</div>
      </a>
      <a href="/admin-history-v2.html" class="menu-card">
        <b>üìö ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</b>
        <div class="muted">‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô/‡πÄ‡∏ß‡∏•‡∏≤/‡∏ä‡πà‡∏≤‡∏á/‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà/‡πÇ‡∏ã‡∏ô/‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</div>
      </a>
      <a href="/admin-tech.html" class="menu-card">
        <b>üë∑ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏≤‡∏á</b>
        <div class="muted">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡πà‡∏≤‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó/‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏ô‡∏≠‡∏£‡πå + ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏á‡∏≤‡∏ô + ‡∏≠‡∏ô‡∏∏‡∏°‡∏±‡∏ï‡∏¥‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</div>
      </a>
      <a href="/admin-legacy.html" class="menu-card">
        <b>üßØ ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡πÄ‡∏î‡∏¥‡∏° (Fallback)</b>
        <div class="muted">‡πÉ‡∏ä‡πâ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏±‡∏ô regression</div>
      </a>
    </div>
  </div>

  <div class="bottom-nav">
    <button class="nav-btn" type="button" onclick="location.href='/admin-review-v2.html'">üì• ‡∏á‡∏≤‡∏ô‡∏à‡∏≠‡∏á</button>
    <button class="nav-btn active" type="button" onclick="location.href='/admin-add-v2.html'">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô</button>
    <button class="nav-btn" type="button" onclick="location.href='/admin-queue-v2.html'">üóìÔ∏è ‡∏Ñ‡∏¥‡∏ß‡∏ä‡πà‡∏≤‡∏á</button>
    <button class="nav-btn" type="button" onclick="location.href='/admin-history-v2.html'">üìö ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</button>
    <button class="nav-btn" type="button" onclick="location.href='/admin-tech.html'">üë∑ ‡∏ä‡πà‡∏≤‡∏á</button>
  </div>

  <script>
    // ‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°: token ‡πÉ‡∏ô localStorage (‡πÑ‡∏°‡πà‡πÅ‡∏ï‡∏∞ auth ‡πÄ‡∏î‡∏¥‡∏°)
    function logoutAdmin(){
      try{
        // legacy tokens
        localStorage.removeItem('admin_token');
        localStorage.removeItem('token');
        // current session keys
        localStorage.removeItem('username');
        localStorage.removeItem('role');
      }catch(e){}

      // clear cookie fallback (used by login.html restoreAuthFromCookie)
      try{
        const secure = (location.protocol === 'https:') ? '; Secure' : '';
        document.cookie = `cwf_auth=; Max-Age=0; Path=/; SameSite=Lax${secure}`;
      }catch(e){}

      // force full reload to avoid auto-redirect loops
      location.replace('/login.html');
    }
    document.getElementById('btnLogout').addEventListener('click', logoutAdmin);
  </script>
</body>
</html>
