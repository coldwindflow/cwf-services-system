<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Dashboard - CWF</title>
  <link rel="stylesheet" href="style.css">
  <style>
    :root{
      --blue1:#0b4bb3;
      --blue2:#081a3a;
      --yellow:#ffcc00;
      --card:#ffffff;
      --muted:rgba(15,23,42,.62);
      --line:rgba(15,23,42,.10);
      --shadow:0 18px 42px rgba(2,6,23,.12);
    }

    body{
      background:
        radial-gradient(900px 420px at 50% -40px, rgba(255,204,0,.22), transparent 55%),
        radial-gradient(900px 420px at 80% 0px, rgba(11,75,179,.18), transparent 55%),
        linear-gradient(180deg, rgba(8,26,58,.92) 0%, rgba(11,75,179,.92) 150px, #f6f8ff 150px, #ffffff 100%);
    }

    /* container */
    .wrap{max-width:460px;margin:0 auto;padding:84px 14px 140px;} /* top padding for fixed topbar */

    /* hero top */
    .hero{
      background:linear-gradient(135deg, rgba(255,204,0,.16) 0%, rgba(255,255,255,.08) 35%, rgba(255,255,255,.00) 100%);
      border:1px solid rgba(255,255,255,.16);
      border-radius:24px;
      padding:14px;
      box-shadow:0 22px 48px rgba(0,0,0,.14);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    /* NOTE: Avatar/name moved to the blue top subbar (in admin-v2-common.js)
       Keep legacy styles in case of fallback, but dashboard no longer renders the identity row here. */
    .meRow{display:flex;align-items:center;gap:12px;min-width:0;}
    .avatar{width:44px;height:44px;border-radius:16px;object-fit:cover;border:1px solid rgba(255,255,255,.22);box-shadow:0 10px 26px rgba(0,0,0,.18);background:rgba(255,255,255,.12);flex:0 0 auto}
    .who{color:rgba(255,255,255,.96);font-weight:1100;font-size:15px;line-height:1.15;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:240px}
    .role{color:rgba(255,255,255,.72);font-weight:1000;font-size:12px;margin-top:2px}

    /* shortcut row (2 blue buttons) */
    .shortcutRow{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px;}
    .shortcut{
      display:flex;align-items:center;gap:10px;padding:12px;border-radius:18px;cursor:pointer;user-select:none;
      background:linear-gradient(135deg, rgba(11,75,179,1) 0%, rgba(30,58,138,1) 55%, rgba(11,27,58,1) 100%);
      border:1px solid rgba(255,255,255,.10);
      box-shadow:0 16px 42px rgba(2,6,23,.22);
      color:#ffffff;
    }
    .shortcut .ico{width:40px;height:40px;border-radius:14px;display:flex;align-items:center;justify-content:center;
      background:rgba(255,255,255,.14);border:1px solid rgba(255,255,255,.18)}
    .shortcut b{font-size:13px;font-weight:1100;color:#fff}
    .shortcut span{display:block;font-size:11px;font-weight:900;opacity:.86;color:rgba(255,255,255,.92)}

    /* segmented (Today/7/30) */
    .seg{margin-top:12px;display:grid;grid-template-columns:1fr 1fr 1fr;gap:0;border-radius:18px;overflow:hidden;border:1px solid rgba(15,23,42,.10);background:#fff;}
    .seg button{padding:12px 10px;border:0;background:transparent;font-weight:1100;font-size:13px;color:rgba(15,23,42,.72);cursor:pointer}
    .seg button.active{background:var(--yellow);color:#0b1b3a;}
    .seg button:not(.active){background:rgba(255,255,255,.92)}

    /* cards */
    .card{background:var(--card);border:1px solid rgba(11,75,179,.14);border-radius:22px;box-shadow:var(--shadow);}
    .card.p14{padding:14px;}
    .muted{color:var(--muted);font-weight:900;font-size:12px}

    /* KPI */
    .kpiRow2{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px;}
    .kpi{border-radius:20px;padding:12px;box-shadow:0 16px 42px rgba(2,6,23,.10)}
    .kpi .t{font-weight:1100;font-size:12px;opacity:.92}
    .kpi .v{margin-top:6px;font-weight:1200;font-size:22px;letter-spacing:.2px}
    .kpi .h{margin-top:2px;font-weight:900;font-size:11px;opacity:.78}

    .kpiBlue{color:#fff;background:linear-gradient(135deg,var(--blue1) 0%, var(--blue2) 100%);border:1px solid rgba(255,255,255,.12)}
    .kpiBlue .t,.kpiBlue .v,.kpiBlue .h{color:#fff}

    .kpiYellow{background:linear-gradient(135deg, #ffd633 0%, var(--yellow) 60%, #ffbf00 100%);border:1px solid rgba(11,27,58,.10)}
    .kpiYellow .t,.kpiYellow .v,.kpiYellow .h{color:#0b1b3a}

    /* Company Revenue + Counts (premium) */
    .bigBlock{margin-top:12px;display:grid;grid-template-columns:1fr;gap:10px;}
    .bigCard{border-radius:22px;padding:14px;box-shadow:0 18px 44px rgba(2,6,23,.10);border:1px solid rgba(15,23,42,.10);background:linear-gradient(135deg, rgba(11,75,179,.08) 0%, rgba(255,204,0,.10) 55%, rgba(255,255,255,1) 100%);}
    .bigCard .head{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .bigCard h3{margin:0;font-size:13px;font-weight:1100;color:#0b1b3a}
    .bigCard .value{margin-top:6px;font-size:28px;font-weight:1200;color:#0b1b3a}
    .countsGrid{margin-top:10px;display:grid;grid-template-columns:1fr 1fr 1fr;gap:8px}
    .miniStat{border-radius:18px;padding:10px;border:1px solid rgba(15,23,42,.10);background:#fff}
    .miniStat .k{font-size:11px;font-weight:1000;color:rgba(15,23,42,.60)}
    .miniStat .n{margin-top:4px;font-size:18px;font-weight:1200;color:#0b1b3a}

    /* Tech stats */
    .techSection{margin-top:12px}
    .techTabs{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .chip{border-radius:999px;padding:8px 12px;font-weight:1100;font-size:12px;border:1px solid rgba(15,23,42,.12);background:#fff;color:#0b1b3a;cursor:pointer}
    .chip.active{background:var(--yellow);border-color:var(--yellow);color:#0b1b3a}

    .techRow{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;}
    .techCard{border-radius:22px;padding:12px;border:1px solid rgba(255,255,255,.14);box-shadow:0 18px 44px rgba(2,6,23,.12);color:#fff}
    .techCard .t{font-weight:1100;font-size:12px;opacity:.95}
    .techCard .v{margin-top:6px;font-weight:1200;font-size:26px;letter-spacing:.2px}
    .techCard .h{margin-top:2px;font-weight:900;font-size:11px;opacity:.80}

    .techOpen{background:linear-gradient(135deg,#16a34a 0%, #22c55e 45%, #064e3b 100%)}
    .techClosed{background:linear-gradient(135deg,#dc2626 0%, #ef4444 45%, #7f1d1d 100%)}

    /* donut */
    .titleRow{display:flex;align-items:center;justify-content:space-between;gap:10px}
    .titleRow h3{margin:0;font-size:15px;font-weight:1100;color:#0b1b3a}
    .donutGrid{display:grid;grid-template-columns:0.55fr 0.45fr;gap:10px;align-items:center;}
    .bigNum{font-size:40px;font-weight:1200;color:#0b1b3a;line-height:1}
    .miniLegend{display:flex;flex-direction:column;gap:8px;margin-top:10px}
    .miniLegend .li{display:flex;align-items:center;justify-content:space-between;gap:10px;font-weight:1100}
    .miniLegend .left{display:flex;align-items:center;gap:10px}
    .dot{width:10px;height:10px;border-radius:999px}
    .li .count{font-weight:1200;color:#0b1b3a}

    /* collapsible filters */
    .filtersCard{margin-top:12px}
    .foldHead{display:flex;align-items:center;justify-content:space-between;gap:10px;cursor:pointer;user-select:none}
    .foldHead b{font-weight:1200;color:#0b1b3a}
    .chev{width:36px;height:36px;border-radius:14px;border:1px solid var(--line);display:flex;align-items:center;justify-content:center;background:#fff}
    .foldBody{margin-top:10px;display:none}
    .filtersCard.open .foldBody{display:block}
    .filtersCard.open .chev{transform:rotate(180deg)}

    .row{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    input[type="date"]{padding:10px 12px;border-radius:14px;border:1px solid rgba(11,75,179,.18);font-weight:1100}
    .btn{border-radius:14px;border:1px solid rgba(15,23,42,.12);padding:10px 12px;font-weight:1100;cursor:pointer}
    .btn.yellow{background:var(--yellow);color:#0b1b3a;border-color:var(--yellow)}
    .btn.blue{background:var(--blue1);color:#fff;border-color:var(--blue1)}
    .btn.ghost{background:#fff;color:#0b1b3a}

    /* chart/list */
    canvas{max-width:100%}
    .list{display:flex;flex-direction:column;gap:10px;margin-top:10px}
    .item{border:1px solid rgba(15,23,42,.10);border-radius:18px;padding:10px 12px;background:#fff;display:flex;justify-content:space-between;gap:12px;align-items:center}
    .item .l{min-width:0}
    .item b{display:block;color:#0b1b3a;font-weight:1100;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .item .s{margin-top:2px;color:rgba(15,23,42,.60);font-weight:900;font-size:12px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .pill{display:inline-flex;align-items:center;gap:6px;border-radius:999px;padding:6px 10px;font-weight:1100;font-size:12px;white-space:nowrap}
    .pill.yellow{background:var(--yellow);color:#0b1b3a}
    .pill.blue{background:var(--blue1);color:#fff}
    .pill.gray{background:#eef2ff;color:#0b1b3a}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- HERO: Quick actions (identity moved to top blue subbar) -->
    <div class="hero">
      <!-- keep hidden identity elements for JS compatibility (values are pushed to top subbar) -->
      <div style="display:none">
        <img id="meAvatar" class="avatar" alt="Admin" />
        <div id="whoBox">‚Äî</div>
        <div id="roleBox">‚Äî</div>
      </div>

      <!-- 2 top buttons (yellow / black text) -->
      <div class="shortcutRow">
        <div class="shortcut" id="goAddJob">
          <div class="ico">‚ûï</div>
          <div>
            <b>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô</b>
            <span>‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô</span>
          </div>
        </div>
        <div class="shortcut" id="goHistory">
          <div class="ico">üóÇÔ∏è</div>
          <div>
            <b>‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏á‡∏≤‡∏ô</b>
            <span>‡∏î‡∏π‡∏á‡∏≤‡∏ô‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</span>
          </div>
        </div>
      </div>

      <!-- Quick range -->
      <div class="seg">
        <button id="quickToday" type="button" class="active">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
        <button id="quick7" type="button">7 ‡∏ß‡∏±‡∏ô</button>
        <button id="quick30" type="button">30 ‡∏ß‡∏±‡∏ô</button>
      </div>
    </div>

    <!-- Personal performance -->
    <div class="kpiRow2">
      <div class="kpi kpiBlue">
        <div class="t">‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ</div>
        <div class="v" id="meSoldJobs">‚Äî</div>
        <div class="h" id="meSoldJobsHint">‚Äî</div>
      </div>
      <div class="kpi kpiBlue" style="background:linear-gradient(135deg,#0b4bb3 0%, #1e3a8a 50%, #0b1b3a 100%)">
        <div class="t">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ/‡∏Ñ‡∏≠‡∏°‡∏°‡∏¥‡∏ä‡∏ä‡∏±‡πà‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</div>
        <div class="v" id="meCommission">‚Äî</div>
        <div class="h" id="meCommissionHint">‚Äî</div>
      </div>
    </div>

    <!-- Company Revenue + Counts -->
    <div class="bigBlock">
      <div class="bigCard">
        <div class="head">
          <h3>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å)</h3>
          <div class="muted" id="coRevenueHint">‚Äî</div>
        </div>
        <div class="value" id="coRevenue">‚Äî</div>

        <div class="countsGrid">
          <div class="miniStat">
            <div class="k">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏≤‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
            <div class="n" id="countToday">‚Äî</div>
          </div>
          <div class="miniStat">
            <div class="k">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏≤‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</div>
            <div class="n" id="countMonth">‚Äî</div>
          </div>
          <div class="miniStat">
            <div class="k">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏á‡∏≤‡∏ô‡∏õ‡∏µ‡∏ô‡∏µ‡πâ</div>
            <div class="n" id="countYear">‚Äî</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tech stats -->
    <div class="card p14 techSection">
      <div class="titleRow">
        <h3>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏ä‡πà‡∏≤‡∏á</h3>
        <div class="muted" id="techHint">‚Äî</div>
      </div>

      <div class="techTabs">
        <button class="chip active" data-techscope="all" type="button">‡∏£‡∏ß‡∏°</button>
        <button class="chip" data-techscope="company" type="button">‡∏ä‡πà‡∏≤‡∏á‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</button>
        <button class="chip" data-techscope="partner" type="button">‡∏û‡∏≤‡∏£‡πå‡∏ó‡πÄ‡∏ô‡∏≠‡∏£‡πå</button>
      </div>

      <div class="techRow">
        <div class="techCard techOpen">
          <div class="t">‡∏ä‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô</div>
          <div class="v" id="techOpen">‚Äî</div>
          <div class="h">‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô</div>
        </div>
        <div class="techCard techClosed">
          <div class="t">‡∏ä‡πà‡∏≤‡∏á‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô</div>
          <div class="v" id="techClosed">‚Äî</div>
          <div class="h">‡∏û‡∏±‡∏Å/‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô</div>
        </div>
      </div>
      <div class="kpiRow2" style="margin-top:10px">
        <div class="kpi kpiYellow">
          <div class="t">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ä‡πà‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
          <div class="v" id="techTotal">‚Äî</div>
          <div class="h">‡∏ï‡∏≤‡∏°‡∏ü‡∏¥‡∏•‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</div>
        </div>
        <div class="kpi" style="background:linear-gradient(135deg, rgba(11,75,179,.10) 0%, rgba(255,204,0,.12) 55%, #fff 100%); border:1px solid rgba(15,23,42,.10)">
          <div class="t" style="font-weight:1100;color:#0b1b3a">‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô</div>
          <div class="v" style="color:#0b1b3a" id="techOpenRate">‚Äî</div>
          <div class="h" style="color:rgba(15,23,42,.60)">‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö/‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
        </div>
      </div>
    </div>

    <!-- Donut: job status -->
    <div class="card p14" style="margin-top:12px">
      <div class="titleRow">
        <h3>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏á‡∏≤‡∏ô</h3>
        <div class="muted" id="donutHint">‚Äî</div>
      </div>
      <div class="donutGrid" style="margin-top:8px">
        <div>
          <div class="bigNum" id="jobTotal">‚Äî</div>
          <div class="muted">‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</div>
          <div class="miniLegend">
            <div class="li">
              <div class="left"><span class="dot" style="background:var(--yellow)"></span>‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö</div>
              <div class="count" id="stPending">‚Äî</div>
            </div>
            <div class="li">
              <div class="left"><span class="dot" style="background:var(--blue1)"></span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥</div>
              <div class="count" id="stActive">‚Äî</div>
            </div>
            <div class="li">
              <div class="left"><span class="dot" style="background:#16a34a"></span>‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</div>
              <div class="count" id="stDone">‚Äî</div>
            </div>
          </div>
        </div>
        <div>
          <canvas id="donut" height="170"></canvas>
        </div>
      </div>
    </div>

    <!-- Collapsible filters (default collapsed) -->
    <div class="card p14 filtersCard" id="filtersCard">
      <div class="foldHead" id="filterToggle" role="button" aria-label="‡∏û‡∏±‡∏ö/‡∏Ç‡∏¢‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á">
        <div>
          <b>üîé ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</b>
          <div class="muted" id="filterSummary">‚Äî</div>
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          <button class="btn blue" id="btnApplyMini" type="button" title="‡πÇ‡∏´‡∏•‡∏î">‚ü≥ ‡πÇ‡∏´‡∏•‡∏î</button>
          <div class="chev">‚ñæ</div>
        </div>
      </div>
      <div class="foldBody" id="filterBody">
        <div class="row" style="margin-top:10px">
          <input type="date" id="fromDate" title="‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà">
          <span class="muted">‚Üí</span>
          <input type="date" id="toDate" title="‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà">
          <button class="btn yellow" id="btnApply" type="button">‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        </div>
      </div>
    </div>

    <div class="card p14" style="margin-top:12px">
      <div class="titleRow">
        <h3>‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô (‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô)</h3>
        <div class="muted" id="candleHint">‚Äî</div>
      </div>
      <canvas id="candles" height="190" style="margin-top:8px"></canvas>
    </div>

    <div class="card p14" style="margin-top:12px">
      <div class="titleRow">
        <h3>‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏£‡∏ß‡∏°‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏á)</h3>
        <div class="muted" id="seriesHint">‚Äî</div>
      </div>
      <div class="row" style="margin-top:10px">
        <button class="btn yellow" data-group="day" type="button">‡∏ß‡∏±‡∏ô</button>
        <button class="btn ghost" data-group="week" type="button">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå</button>
        <button class="btn ghost" data-group="month" type="button">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</button>
        <button class="btn ghost" data-group="year" type="button">‡∏õ‡∏µ</button>
      </div>
      <canvas id="chart" height="160" style="margin-top:10px"></canvas>
    </div>

    <div class="card p14" style="margin-top:12px">
      <div class="titleRow">
        <h3>‡∏á‡∏≤‡∏ô‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ (‡∏£‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö)</h3>
        <div class="muted" id="pendingHint">‚Äî</div>
      </div>
      <div class="list" id="pendingList"></div>
    </div>

    <div class="card p14" style="margin-top:12px">
      <div class="titleRow">
        <h3>‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î + ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥</h3>
        <div class="muted" id="activeHint">‚Äî</div>
      </div>
      <div class="list" id="activeList"></div>
    </div>

  </div>

  <script src="admin-v2-common.js?v=20260212_dash_ui2"></script>
  <script src="admin-dashboard-v2.js?v=20260212_dash_ui2"></script>
</body>
</html>
